<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="CommentDao">

	
    <!-- resultMap 정의 -->
    <resultMap id="CommentResultMap" type="com.gameboard.biz.post.Comment">
        <id property="commentID" column="commentID"/>
        <result property="wtID" column="wtID"/>
        <result property="userID" column="userID"/>
        <result property="commentContent" column="commentContent"/>
        <result property="commentDate" column="commentDate"/>
    </resultMap>

	<!-- 댓글 추가 -->
	<insert id="insertComment"
		parameterType="com.gameboard.biz.post.Comment">
		INSERT INTO WT_BOARD_COMMENT (
		commentID,
		wtID,
		userID,
		commentContent
		) VALUES (
		(SELECT NVL(MAX(commentID), 0) + 1 FROM WT_BOARD_COMMENT),
		#{wtID},
		#{userID},
		#{commentContent}
		)
	</insert>

	<!-- 게시물 ID로 댓글 조회 -->
	<select id="selectCommentsByPostId" parameterType="int"
		resultType="com.gameboard.biz.post.Comment">
		SELECT *
		FROM WT_BOARD_COMMENT
		WHERE wtID = #{wtID}
		ORDER BY commentDate DESC
	</select>
	
	 <delete id="deleteComment" parameterType="int">
        DELETE FROM WT_BOARD_COMMENT
        WHERE commentID = #{commentID}
    </delete>
    

</mapper>